"use strict";

import BaseAudioContext from "./BaseAudioContext.js";
import AudioManager from "../system/index.js";
import { NotSupportedError } from "../errors/index.js";
import { isWorkletsVersionSupported, workletsModule } from "../utils/index.js";
export default class AudioContext extends BaseAudioContext {
  constructor(options) {
    if (options && options.sampleRate && (options.sampleRate < 8000 || options.sampleRate > 96000)) {
      throw new NotSupportedError(`The provided sampleRate is not supported: ${options.sampleRate}`);
    }
    let audioRuntime = null;
    if (isWorkletsVersionSupported) {
      audioRuntime = workletsModule.createWorkletRuntime('AudioWorkletRuntime');
    }
    super(global.createAudioContext(options?.sampleRate || AudioManager.getDevicePreferredSampleRate(), options?.initSuspended || false, audioRuntime));
  }
  async close() {
    return this.context.close();
  }
  async resume() {
    return this.context.resume();
  }
  async suspend() {
    return this.context.suspend();
  }
}
//# sourceMappingURL=AudioContext.js.map